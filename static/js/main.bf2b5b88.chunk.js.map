{"version":3,"sources":["styles/TransactionHistory.module.css","styles/Balance.module.css","styles/App.module.css","styles/Controls.module.css","components/Controls.jsx","components/Balance.jsx","components/TransactionHistory.jsx","components/Dashboard.jsx","App.js","index.js"],"names":["module","exports","Controls","state","amount","handleInputChange","e","setState","target","value","handleFormInput","preventDefault","handleDepositButton","props","onDeposit","Number","handleWithdrawButton","onWithdraw","this","className","style","controls","action","onSubmit","type","name","min","input","onChange","button","onClick","Component","Balance","balance","income","expenses","arrow","up","item","down","defaultProps","TransactionHistory","transactions","transactionHistory","map","transaction","id","date","key","Dashboard","notify","message","toast","error","addTransaction","Date","toLocaleString","shortid","generate","calculateFunds","reduce","acc","localStorage","getItem","parsedTransactions","JSON","parse","prevProps","prevState","lengt","length","setItem","stringify","autoClose","transition","Slide","App","app","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bf2b5b88.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"transactionHistory\":\"TransactionHistory_transactionHistory__2b6i3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"balance\":\"Balance_balance__3fq7T\",\"arrow\":\"Balance_arrow__jCQzf\",\"item\":\"Balance_item__1vh0v\",\"up\":\"Balance_up__4gUOQ\",\"down\":\"Balance_down__nbx_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__101rE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Controls_controls__1DQiP\",\"button\":\"Controls_button__2REPT\",\"input\":\"Controls_input__BRrbc\"};","import React, { Component } from 'react';\nimport T from 'prop-types';\n\nimport style from '../styles/Controls.module.css';\n\nclass Controls extends Component {\n  static propTypes = {\n    onDeposit: T.func.isRequired,\n    onWithdraw: T.func.isRequired,\n  };\n\n  state = {\n    amount: '',\n  };\n\n  handleInputChange = e => {\n    this.setState({\n      amount: e.target.value,\n    });\n  };\n\n  handleFormInput = e => {\n    e.preventDefault();\n  };\n\n  handleDepositButton = () => {\n    this.props.onDeposit(Number(this.state.amount));\n    this.setState({ amount: '' });\n  };\n\n  handleWithdrawButton = () => {\n    this.props.onWithdraw(Number(this.state.amount));\n    this.setState({ amount: '' });\n  };\n\n  render() {\n    const { amount } = this.state;\n\n    return (\n      <section className={style.controls}>\n        <form action=\"\" onSubmit={this.handleFormInput}>\n          <input\n            type=\"number\"\n            name=\"amount\"\n            min=\"0\"\n            className={style.input}\n            value={amount}\n            onChange={this.handleInputChange}\n          />\n          <button\n            type=\"button\"\n            className={style.button}\n            onClick={this.handleDepositButton}\n          >\n            Deposit\n          </button>\n          <button\n            type=\"button\"\n            className={style.button}\n            onClick={this.handleWithdrawButton}\n          >\n            Withdraw\n          </button>\n        </form>\n      </section>\n    );\n  }\n}\n\nexport default Controls;\n","import React from 'react';\nimport T from 'prop-types';\n\nimport style from '../styles/Balance.module.css';\n\nconst Balance = ({ balance, income, expenses }) => {\n  return (\n    <section className={style.balance}>\n      <i className={`material-icons ${style.arrow} ${style.up}`}>\n        arrow_upward\n      </i>\n      <span className={style.item}>{income}$</span>\n      <i className={`material-icons ${style.arrow} ${style.down}`}>\n        arrow_downward\n      </i>\n      <span className={style.item}> {expenses}$</span>\n      <span className={style.item}>Balance: {balance}$</span>\n    </section>\n  );\n};\nBalance.defaultProps = {\n  expenses: 0,\n  income: 0,\n};\n\nBalance.propTypes = {\n  balance: T.number.isRequired,\n  income: T.number,\n  expenses: T.number,\n};\n\nexport default Balance;\n","import React from 'react';\nimport T from 'prop-types';\n\nimport style from '../styles/TransactionHistory.module.css';\n\nconst TransactionHistory = ({ transactions }) => {\n  const renderTransactions = () => {\n    return transactions.map(transaction => {\n      const { id, date, type, amount } = transaction;\n      return (\n        <tr key={id}>\n          <td>{type}</td>\n          <td>{amount}$</td>\n          <td>{date}</td>\n        </tr>\n      );\n    });\n  };\n\n  return (\n    <div className={style.transactionHistory}>\n      <table className=\"history\">\n        <thead>\n          <tr>\n            <th>Transaction</th>\n            <th>Amount</th>\n            <th>Date</th>\n          </tr>\n        </thead>\n        <tbody>{renderTransactions()}</tbody>\n      </table>\n    </div>\n  );\n};\nTransactionHistory.propTypes = {\n  transactions: T.arrayOf(\n    T.shape({\n      id: T.string.isRequired,\n      type: T.string.isRequired,\n      amount: T.number.isRequired,\n      date: T.string.isRequired,\n    }),\n  ).isRequired,\n};\n\nexport default TransactionHistory;\n","import React, { Component } from 'react';\nimport { ToastContainer, toast, Slide } from 'react-toastify';\nimport shortid from 'shortid';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Controls from './Controls';\nimport Balance from './Balance';\nimport TransactionHistory from './TransactionHistory';\n\nclass Dashboard extends Component {\n  state = {\n    balance: 0,\n    transactions: [],\n  };\n\n  componentDidMount() {\n    try {\n      const transactions = localStorage.getItem('transactions');\n      const parsedTransactions = JSON.parse(transactions);\n      const { balance } = this.calculateFunds(parsedTransactions);\n      this.setState({\n        transactions: parsedTransactions,\n        balance,\n      });\n    } catch (error) {\n      // some text to prevent ESlint error\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { transactions } = this.state;\n    if (prevState.transactions.lengt !== transactions.length) {\n      localStorage.setItem('transactions', JSON.stringify(transactions));\n    }\n  }\n\n  notify = message => toast.error(message);\n\n  addTransaction = (amount, type) => {\n    const date = new Date().toLocaleString('en-GB');\n    const transaction = {\n      id: shortid.generate(),\n      date,\n      type,\n      amount,\n    };\n\n    this.setState(state => ({\n      transactions: [transaction, ...state.transactions],\n    }));\n  };\n\n  calculateFunds = transactions => {\n    return transactions.reduce(\n      (acc, transaction) => {\n        const income =\n          transaction.type === 'Deposit'\n            ? acc.income + transaction.amount\n            : acc.income;\n        const expenses =\n          transaction.type === 'Withdrawal'\n            ? acc.expenses + transaction.amount\n            : acc.expenses;\n        const balance = income - expenses;\n\n        return {\n          ...acc,\n          income,\n          expenses,\n          balance,\n        };\n      },\n      { income: 0, expenses: 0, balance: 0 },\n    );\n  };\n\n  onDeposit = amount => {\n    if (amount <= 0) {\n      this.notify('Введите сумму для проведения операции!');\n      return;\n    }\n    this.setState(state => ({\n      balance: state.balance + amount,\n    }));\n    this.addTransaction(amount, 'Deposit');\n  };\n\n  onWithdraw = amount => {\n    if (amount <= 0) {\n      this.notify('Введите сумму для проведения операции!');\n      return;\n    }\n    if (this.state.balance - amount < 0) {\n      this.notify('На счету недостаточно средств для проведения операции!');\n      return;\n    }\n    this.setState(state => ({\n      balance: state.balance - amount,\n    }));\n\n    this.addTransaction(amount, 'Withdrawal');\n  };\n\n  render() {\n    const { transactions, balance } = this.state;\n    const { income, expenses } = this.calculateFunds(transactions);\n\n    return (\n      <div>\n        <Controls onDeposit={this.onDeposit} onWithdraw={this.onWithdraw} />\n        {transactions.length > 0 && (\n          <Balance balance={balance} income={income} expenses={expenses} />\n        )}\n\n        {transactions.length > 0 && (\n          <TransactionHistory transactions={transactions} />\n        )}\n\n        <ToastContainer autoClose={2000} transition={Slide} />\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n","import React from 'react';\nimport Dashboard from './components/Dashboard';\n\nimport 'normalize.css';\nimport style from './styles/App.module.css';\n\nconst App = () => {\n  return (\n    <div className={style.app}>\n      <Dashboard />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}